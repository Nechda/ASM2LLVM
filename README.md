[ENG](Readme_en.md)
# ASM2LLVM
В данном репозитории представлен исходный код бинарного транслятора программ под архитектуру [CPU-emulator](https://github.com/Nechda/CPU-emulator) в код на LLVM IR.
## Requerements
В данном проекте используется пакет [llvm](https://github.com/llvm/llvm-project) (ver 10.0.0), а также [Boost](https://www.boost.org/) (ver 1.72.0). Стандарт языка - c++14.
## Command prompt
После сборки проекта, например, в файл translator вам доступны следующие команды:
* **-i <имя файла>**  
Указывает входной файл, содержащий скомпилированную программу. Данный флаг является обязательным при запуске.
* **-o <имя файла>**  
Указывает выходной файл для транслятора. Если данный флаг не указывается, то результат трансляции выподится на экран.
* **-l <имя файла>**  
Задает имя файла лога. По умолчанию файл лога "log.log".
* **-n**  
Отключает логирование. При возникновении ошибок отладочная информация печатается на экран.
* **-r**  
Запуск программы на исполнение после трансляции.
* **--memorySize=<число байт>**  
Указывает размер памяти виртуального процессора в байтах. Минимальный размер памяти равен 128 байтам, а максимальный 512 кБ.
* **--makeItBetter**  
При выставлении данного флага транслятор производит оптимизацию сгенерированного LLVM IR.


## Examples
В директории [examples](https://github.com/Nechda/ASM2LLVM/tree/main/examples) располагаются примеры программ и их оттранслированный вариант. Рассмотрим примеры команд, запускающих транслятор в различных режимах:

    >translator -i sqr.bin -r --memorySize=1024 --makeItBetter
Транслятор будет работать с файлом sqr.bin, а после трансляции запустит на исполнение с ограничением по памяти процессора в 1024 байта. Оттранслированный код отобразится на экране, но перед этим пройдет этап оптимизации.

    >translator -i factorial.bin -o factorial.ll -l my_log.txt
Транслируем программу factorial.bin, результат записывается в factorial.ll. В случае ошибок, логирование происходит в файл my_log.txt.

## Writing your own programs
Для получения скомпилированных программ можно поступить двумя способами:
* Собрать компилятор ассемблера из проекта [CPU-emulator](https://github.com/Nechda/CPU-emulator)
* Собрать компилятор простого языка программирования высокого уровня из проекта [Programming language](https://github.com/Nechda/Techno_track/tree/master/Programming%20language)

После того, как вы соберете компилятор ассемблера или ЯП, то сгенерированные бинарники можно будет передавать транслятору.
